<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 6.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">
<title>README</title>
</head>

<body>

<p><b><font size="+2" face="Tahoma">README</font></b></p>
<p><font face="Tahoma">Last Updated: Dec  27, 2007</font></p>
<p><font face="Tahoma">This document describes how to build Business Intelligence and Reporting 
Tool(BIRT) components from the command line using Ant scripts in this project 
and org.eclipse.releng.basebuilder.</font></p>
<p><font face="Tahoma"><br>
<b>Table of Contents</b><br>
　</font></p>
<p><font face="Tahoma"><a href="#description">Description</a><br>
<a href="#prereq">Prerequisites</a><br>
<a href="#setup">Setup</a><br>
<a href="#components">Run the Build</a><br>
<a href="#antbuildproperties">Ant properties defined in build.properties</a><br>
<a href="#examples">Examples</a><br>
　</font></p>
<p><font face="Tahoma"><b><a name="description">Description</a></b></font></p>
<p><font face="Tahoma">org.eclipse.birt.releng.birtbuilder contains Ant scripts that invoke script 
generators in org.eclipse.pde.build to build all shipped <a href="#components">
components of Birt:</a> SDK,tests and Language Packs.<br>
　</font></p>
<p><font face="Tahoma"><b><a name="prereq">Prerequisites</a></b></font></p>
<p><font face="Tahoma">1. <a href="http://www.cvshome.org/">CVS</a> version 1.10 or higher.<br>
2. <a href="http://java.sun.com/j2se/1.4/download.html">1.4 level JDK</a>.<br>
3. <a href="http://www.info-zip.org/pub/infozip/">Info-Zip zip and unzip</a><br>
5. org.eclipse.releng.basebuilder and org.eclipse.birt.releng.birtbuilder from
<a href="http://dev.eclipse.org/viewcvs/">dev.eclipse.org</a>.<br>
　</font></p>
<p><font face="Tahoma"><b><a name="setup">Setup</a><br>
<br>
</b>1. Add the zip, unzip, tar, gzip and cvs executables to your path as 
required.<br>
2. Add the jre/bin directory of the installed JDK to your path.<b><br>
</b>3. Check out org.eclipse.releng.basebuilder and 
org.eclipse.birt.releng.birtbuilder into a directory.<br>
&nbsp;&nbsp;&nbsp; (We recommend to use tagged version of 
org.eclipse.releng.basebuilder. The HEAD version is not stable and may have 
changes which will lead to build failure. The examples below are tested with tag 
version <b>vI20070209-1006</b>)<br>
4. Download Eclipse 3.4 build and unzip into a directory as baseLocation. <br>
5. Download WTP 3.0/EMF2.4/GEF3.4 M5 builds and DTP latest 1.6 nightly builds and unzip into baseLocation.<br>
6.<i> Download iText jar. This step can be skip for HEAD version</i><br>
　</font></p>
<p><font face="Tahoma"><b><a name="components">Run the Build</a></b></font></p>
<p><font face="Tahoma">cd to org.eclipse.birt.releng.birtbuilder directory and execute the 
following command (currently the build.xml script can only be executed in a 
headless eclipse due to
<a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=35923">bug 35923</a>):
</font>
</p>
<p><font face="Tahoma">&quot;java -cp ../org.eclipse.releng.basebuilder/startup.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -Dcomponent=&lt;component name specified in table below&gt; [Ant properties 
to override in a <a href="#antbuildproperties">component's build.properties</a>] 
&quot;<br>
<br><b>Note:</b> before running the build, <a href="#antbuildproperties">properties</a>  need to be set correctly in build.properties or via command line. </font></p><br><p><font face="Tahoma">The component property value sets the name of the directory in 
org.eclipse.birt.releng.birtbuilder which contains the Ant scripts that build a 
given an Eclipse component as descibed below: <br>
　</font></p>
<table width="100%" border="1">
  <tr>
    <td width="10%"><font face="Tahoma">Component </font></td>
    <td width="20%"><font face="Tahoma">Path in BirtBuilder</font></td>
    <td width="50%"><font face="Tahoma">Description</font></td>
  </tr>
  <tr>
    <td width="10%"><font face="Tahoma">birt</font></td>
    <td width="20%"><font face="Tahoma">eclipse/buildConfigs/birt</font></td>
    <td width="50%"><font face="Tahoma">This directory contains the scripts used to build any or all 
    configurations of the BIRT framework SDK. An BIRT SDK is comprised of 
    binaries, source, user and developer documentation for the BIRT framework.</font></td>
  </tr>
  <tr>
    <td width="10%"><font face="Tahoma">birt.third.party</font></td>
    <td width="20%"><font face="Tahoma">eclipse/buildConfigs/birt.third.party</font></td>
    <td width="50%"><font face="Tahoma">This directory contains the scripts used to build any or all 
    configurations of the Third Party plugins used by BIRT, without source and 
    developer documentation.</font></td>
  </tr>
  <tr>
    <td width="10%"><font face="Tahoma">rcp</font></td>
    <td width="20%"><font face="Tahoma">eclipse/buildConfigs/birt.rcp</font></td>
    <td width="50%"><font face="Tahoma">This directory contains the scripts used to build any or all 
    configuration of the BIRT RCP plug-ins.</font></td>
  </tr>
  <tr>
    <td width="10%" height="41"><font face="Tahoma">birt.tests</font></td>
    <td width="20%" height="41"><font face="Tahoma">eclipse/buildConfigs/birt.tests</font></td>
    <td width="50%" height="41"><font face="Tahoma">This directory contains the scripts used to 
    build the BIRT Automated testing environment which contains the test 
    framework plug-ins, JUnit test plug-ins, and scripts used to launch the 
    JUnit tests from the command line.</font></td>
  </tr>
<p><font face="Tahoma"><b><a name="antbuildproperties">Ant Properties Settings in a component's build.properties</a><br>
<br>
</b>The following properties are pre-defined in the build.properties file for 
the specified component. They can be overridden by setting them at the command 
line at build time or by changing them directly in the component's 
build.properties file.</font></p>
<table width="100%" border="1" height="1028">
  <tr>
    <td height="16"><font face="Tahoma">Name</font></td>
    <td height="16"><font face="Tahoma">Description</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">baseos,basews,basearch</font></td>
    <td height="32"><font face="Tahoma">The os, ws and arch values of a pre-built eclipse component 
    being compiled against. Currently BIRT use *,*,*</font></td>
  </tr>
  <tr>
    <td height="42"><font face="Tahoma">baseLocation</font></td>
    <td height="42"><font face="Tahoma">A directory separate from buildDirectory which contains 
    pre-built plugins and features against which to compile. The basedirectory 
    must not contain any features, plugins or fragments which are already or 
    will be located in the buildDirectory (see below).</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">bootclasspath</font></td>
    <td height="32"><font face="Tahoma">Sets the value for the attribute &quot;bootclasspath&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to ${java.home}/lib/rt.jar.</font></td>
  </tr>
  <tr>
    <td height="64"><font face="Tahoma">buildDirectory</font></td>
    <td height="64"><font face="Tahoma">The absolute path to a working directory where the source 
    for the build will be exported, where scripts will be generated and where 
    the end products of the build will be located. On Windows systems, the path 
    length should not exceed thirty characters due to path length limitations 
    when compiling some classes in eclipse.</font></td>
  </tr>
  <tr>
    <td height="16"><font face="Tahoma">buildId</font></td>
    <td height="16"><font face="Tahoma">The build name. Default set to &quot;build&quot;.</font></td>
  </tr>
  <tr>
    <td height="48"><font face="Tahoma">buildLabel</font></td>
    <td height="48"><font face="Tahoma">Refers to the name of the directory which will contain the end result of 
    the build. Default set to v${buildId}, ie.&quot;vbuild&quot;. This 
    directory will be created inside the location specified by the ${buildDirectory} 
    property.</font></td>
  </tr>
  <tr>
    <td height="180"><font face="Tahoma">buildType</font></td>
    <td height="180"><font face="Tahoma">Letters I, N, S, R or M are used in Eclipse builds to identify builds as 
    being one of the following:<br>
    <br>
    I - Integration<br>
    N - Nightly<br>
    S - Stable<br>
    R - Release<br>
    M - Maintenance<br>
　</font><p><font face="Tahoma">If set to N, all source will be checked out from the HEAD stream. In all 
    other cases, tags as specifed in map files will be used when exporting 
    plugins to the buildDirectory. </font> </td>
  </tr>
  <tr>
    <td height="64"><font face="Tahoma">configs</font></td>
    <td height="64"><font face="Tahoma">&nbsp;BIRT use *,*,* in birtbuilder, which indicates platform independence.</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">javacDebugInfo</font></td>
    <td height="32"><font face="Tahoma">Sets the value for the attribute &quot;debug&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task
    </a>in a plugins' build.xml. Default set to on.</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">javacFailOnError</font></td>
    <td height="32"><font face="Tahoma">Sets the value for the attribute &quot;failonerror&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Build will continue even if there are compilation 
    errors when this is set to false.</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">javacSource</font></td>
    <td height="32"><font face="Tahoma">Sets the value for the attribute &quot;source&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to 1.3.</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">javacTarget</font></td>
    <td height="32"><font face="Tahoma">Sets the value for the attribute &quot;target&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to 1.1.</font></td>
  </tr>
  <tr>
    <td height="32"><font face="Tahoma">javacVerbose</font></td>
    <td height="32"><font face="Tahoma">Sets the value for the attribute &quot;verbose&quot; in calls to the
    <a href="http://ant.apache.org/manual/CoreTasks/javac.html">Ant &lt;javac&gt; task</a> 
    in a plugins' build.xml. Default set to true.</font></td>
  </tr>
  <tr>
    <td height="132"><font face="Tahoma">mapVersionTag</font></td>
    <td height="132"><font face="Tahoma">Sets the tag attribute in a call to the
    <a href="http://ant.apache.org/manual/CoreTasks/cvs.html">Ant &lt;cvs&gt; task </a>
    to check out org.eclipse.birt.releng, the map file project on dev.eclipse.org 
    used in the build.</font><p><font face="Tahoma">Can be set to a specific tag to download the map files 
    used for a previous integration build. Typically, these tags are in the form 
    &quot;v&lt;date/timestamp&gt;&quot; for example &quot;v200307110800&quot; will checkout the map files 
    used to run the integration at the specified date/time. </font> </td>
  </tr>
  <tr>
    <td height="16"><font face="Tahoma">zipargs</font></td>
    <td height="16"><font face="Tahoma">Arguments to send to the zip executable. ie. zipargs=-y on Linux 
    preserves symbolic links.</font></td>
  </tr>
</table>
<p><font face="Tahoma"><b><a name="examples">Examples</a><br>
<br>
</b><a href="#exampleLinux">Build BIRT on Linux</a></font></p>
<p><font face="Tahoma"><a href="#exampleWindows">Build BIRT on Windows</a></font></p>
<p><font face="Tahoma"><a href="#structLinux">Server directory&nbsp; structure 
of Linux Example&nbsp; </a></font></p>
<p><font face="Tahoma"><a href="#structWindows">Server directory&nbsp; structure 
of Windows Example </a></font></p>
<p><font face="Tahoma"><b><a name="exampleLinux">Build BIRT SDK component on Linux</a></b></font></p>
<p><font face="Tahoma">Below property in build.properties need to be set 
correctly to enable the process. They also can be set in the command line.<br>
(The value below is what we use in this example)<br>
<br>
buildDirectory = /home/adb/farrah/testBuilder<br>
postingDirectory = /home/adb/farrah/testBuilder/output<br>
baseLocation = /home/adb/farrah/testBuilder/org.eclipse.releng.basebuilder<br>
basedir = /home/adb/farrah/testBuilder/org.eclipse.birt.releng.birtbuilder<br>
eclipse.pdebuild.scripts = /home/adb/farrah/testBuilder/org.eclipse.releng.basebuilder/plugins/org.eclipse.pde.build/scripts<br>
eclipse.pdebuild.templates = /home/adb/farrah/testBuilder/org.eclipse.releng.basebuilder/plugins/org.eclipse.pde.build/templates<br>
eclipse.pdebuild.home = /home/adb/farrah/testBuilder/org.eclipse.releng.basebuilder<br>
eclipse.build.configs = /home/adb/farrah/testBuilder/org.eclipse.birt.releng.birtbuilder<br>
baseLocation = /home/adb/releng/baseLocation<br>
bootclasspath = /usr/local/j2sdk1.4.2_13/jre/lib/rt.jar<br>
<br>
1.&nbsp; Run the below command under <b>org.eclipse.releng.basebuilder </b>to 
build third party features which is need by BIRT:</font></p>
<p><font face="Tahoma">java -cp ../org.eclipse.releng.basebuilder/plugins/org.eclipse.equinox.launcher.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -propertyfile build.properties -Dcomponent=/home/adb/farrah/testBuilder/org.eclipse.birt.releng.birtbuilder/eclipse/buildConfigs/<b>birt.third.party</b> -Dconfigs=&quot;*,*,*&quot; -Djavacfailonerror=true -DjavacVerbose=false 
-DbuildDirectory=/home/adb/farrah/testBuilder 
-Dzipargs=-y -Dbootclasspath=/usr/local/j2sdk1.4.2_13/jre/lib/rt.jar</font></p>
<p><font face="Tahoma"><br>
2.&nbsp; Run the below command under <b>org.eclipse.releng.basebuilder </b>to 
build BIRT SDK features:</font></p>

<p><font face="Tahoma">java -cp ../org.eclipse.releng.basebuilder/plugins/org.eclipse.equinox.launcher.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -propertyfile build.properties -Dcomponent=/home/adb/farrah/testBuilder/org.eclipse.birt.releng.birtbuilder/eclipse/buildConfigs/<b>birt</b> -Dconfigs=&quot;*,*,*&quot; -Djavacfailonerror=true -DjavacVerbose=false 
-DbuildDirectory=/home/adb/farrah/testBuilder 
-Dzipargs=-y -Dbootclasspath=/usr/local/j2sdk1.4.2_13/jre/lib/rt.jar<br>
<br>
Firsts step builds an third party package used in BIRT first only in the directory
<b>${postingDirectory}</b> with name &quot;birt-third-party-${package.version}.zip&quot;. 
Then the following command will build birt framework-SDK package in <b>
${postingDirectory}</b> with name&quot;&quot;. 
birt-report-framework-sdk-${package.version}.zip. &quot;-DjavaVerbose=false&quot; indicates that no compile logs will be 
generated and &quot;-Djavacfailonerror=true&quot; will corrupt the build if there 
are any compile errors. <br>
　</font></p>

<p><font face="Tahoma"> <br>
<b><a name="exampleWindows">Build BIRT SDK component on Windows</a></b></font></p>

<p><font face="Tahoma">Building on Windows is similar to building on Linux. Set 
properties as below in this example:<br>
buildDirectory = D:/testBuilder<br>
postingDirectory = D:/testBuilder/output<br>
baseLocation = D:/testBuilder/org.eclipse.releng.basebuilder<br>
basedir = D:/testBuilder/org.eclipse.birt.releng.birtbuilder<br>
eclipse.pdebuild.scripts = 
D:/testBuilder/org.eclipse.releng.basebuilder/plugins/org.eclipse.pde.build/scripts<br>
eclipse.pdebuild.templates = 
D:/testBuilder/org.eclipse.releng.basebuilder/plugins/org.eclipse.pde.build/templates<br>
eclipse.pdebuild.home = D:/testBuilder/org.eclipse.releng.basebuilder<br>
eclipse.build.configs = D:/testBuilder/org.eclipse.birt.releng.birtbuilder<br>
baseLocation = D:/testBuilder/baseLocation<br>
bootclasspath = C:/j2sdk1.4.2_13/jre/lib/rt.jar<br>
　</font></p>

<p><font face="Tahoma">1.&nbsp; Run the below command under <b>org.eclipse.releng.basebuilder </b>to 
build third party features which is need by BIRT:<br>
<br>
java -cp ../org.eclipse.releng.basebuilder/plugins/org.eclipse.equinox.launcher.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -propertyfile build.properties -Dcomponent=D:/testBuilder/org.eclipse.birt.releng.birtbuilder/eclipse/buildConfigs/<b>birt.third.party</b> -Dconfigs=&quot;*,*,*&quot; -Djavacfailonerror=true -DjavacVerbose=false 
-DbuildDirectory=D:/testBuilder -Dbootclasspath=C:/j2sdk1.4.2_13/jre/lib/rt.jar -Dzipargs=" "<br>
　</font></p>
<p><font face="Tahoma">2.&nbsp; Run the below command under <b>org.eclipse.releng.basebuilder </b>to 
build BIRT SDK features:</font></p>

<p><font face="Tahoma">java -cp ../org.eclipse.releng.basebuilder/plugins/org.eclipse.equinox.launcher.jar 
org.eclipse.core.launcher.Main -application org.eclipse.ant.core.antRunner -buildfile 
build.xml -propertyfile build.properties -Dcomponent=D:/testBuilder/org.eclipse.birt.releng.birtbuilder/eclipse/buildConfigs/<b>birt</b> -Dconfigs=&quot;*,*,*&quot; -Djavacfailonerror=true -DjavacVerbose=false 
-DbuildDirectory=D:/testBuilder -Dbootclasspath=C:/j2sdk1.4.2_13/jre/lib/rt.jar -Dzipargs=" "<br>
<br>
<b><a name="structLinux">Build server directory of Linux Example</a></b></font></p>

<table cellPadding="2" border="1">
  <tr>
    <td><font face="Tahoma"><b>Path</b> </font></td>
    <td><font face="Tahoma"><b>Purpose/Description</b> </font></td>
  </tr>
  <tr vAlign="top">
    <td><font face="Tahoma">/home/adb/farrah/testBuilder</font></td>
    <td><font face="Tahoma">main build directory</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/farrah/testBuilder/plugins</font></td>
    <td><font face="Tahoma">source folders to store plugins. If the plugin is 
    not existing in this location, it will be checked out automatically.</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/farrah/testBuilder/features</font></td>
    <td><font face="Tahoma">source folders to store feature plugins</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/farrah/testBuilder</font>/<font face="Tahoma">org.eclipse.releng.basebuilder</font></td>
    <td><font face="Tahoma">where Eclipse basebuilder locates</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/farrah/testBuilder</font>/<font face="Tahoma">org.eclipse.birt.releng.birtbuilder</font></td>
    <td><font face="Tahoma">where org.eclipse.birt.releng.birtbuilder locates
    </font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/farrah/testBuilder</font>/<font face="Tahoma">output</font></td>
    <td><font face="Tahoma">the output directory where exported and packaged zip 
    can be found</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/releng/baseLocation</font></td>
    <td><font face="Tahoma">base location where Eclipse 
    platform/DTP/EMF/GEF/Orbit prerequisites locate</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/releng/baseLocation/plugins</font></td>
    <td><font face="Tahoma">where prerequisites plugins locate</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">/home/adb/releng/baseLocation/features</font></td>
    <td><font face="Tahoma">where prerequisites features locate</font></td>
  </tr>
  <tr vAlign="top">
    <td><font face="Tahoma">/home/adb/farrah/testBuilder/P4/iText</font></td>
    <td><font face="Tahoma">where itext-1.4.6.jar locates(iText.jar is in CVS after 2.2RC3)</font></td>
  </tr>
</table>
<p><font face="Tahoma"><b><a name="structWindows">Build server directory of 
Windows Example</a></b></font></p>
<table cellPadding="2" border="1">
  <tr>
    <td><font face="Tahoma"><b>Path</b> </font></td>
    <td><font face="Tahoma"><b>Purpose/Description</b> </font></td>
  </tr>
  <tr vAlign="top">
    <td><font face="Tahoma">D:/testBuilder</font></td>
    <td><font face="Tahoma">main build directory</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder/plugins</font></td>
    <td><font face="Tahoma">source folders to store plugins. If the plugin is 
    not existing in this location, it will be checked out automatically.</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder/features</font></td>
    <td><font face="Tahoma">source folders to store feature plugins</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder</font>/<font face="Tahoma">org.eclipse.releng.basebuilder</font></td>
    <td><font face="Tahoma">where Eclipse basebuilder locates</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder</font>/<font face="Tahoma">org.eclipse.birt.releng.birtbuilder</font></td>
    <td><font face="Tahoma">where org.eclipse.birt.releng.birtbuilder locates
    </font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder</font>/<font face="Tahoma">output</font></td>
    <td><font face="Tahoma">the output directory where exported and packaged zip 
    can be found</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder/baseLocation</font></td>
    <td><font face="Tahoma">base location where Eclipse 
    platform/DTP/EMF/GEF/Orbit prerequisites locate</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder/baseLocation/plugins</font></td>
    <td><font face="Tahoma">where prerequisites plugins locate</font></td>
  </tr>
  <tr>
    <td><font face="Tahoma">D:/testBuilder/baseLocation/features</font></td>
    <td><font face="Tahoma">where prerequisites features locate</font></td>
  </tr>
  <tr vAlign="top">
    <td><font face="Tahoma">D:/testBuilder/P4/iText</font></td>
    <td><font face="Tahoma">where itext-1.4.6.jar locates (iText.jar is in CVS after 2.2RC3)</font></td>
  </tr>
</table>

</body>

</html>